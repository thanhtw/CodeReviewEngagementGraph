<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewpor        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
            justify-items: center;
        }ent="width=device-width, initial-scale=1.0">
    <title>æè¿°æ€§çµ±è¨ˆå ±å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #f39c12;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 4px solid #f39c12;
            padding-left: 15px;
        }
        .legend-title {
            color: #2c3e50;
            margin: 0;
            grid-column: 1 / -1;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .variable-card {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .variable-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .variable-card h3 {
            color: #2c3e50;
            margin-top: 0;
            border-bottom: 2px solid #f39c12;
            padding-bottom: 10px;
        }
        .stats-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .stats-table th,
        .stats-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .stats-table th {
            background-color: #f8f9fa;
            color: #2c3e50;
            font-weight: bold;
        }
        .stats-table tr:hover {
            background-color: #f8f9fa;
        }
        .chart-container {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
            justify-items: center;
        }
        @media (max-width: 1024px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            .chart-canvas {
                width: 100%;
                height: 120px;
            }
            .chart-canvas-small {
                width: 100%;
                height: 160px;
            }
        }
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            .chart-canvas {
                width: 100%;
                height: 100px;
            }
            .chart-canvas-small {
                width: 100%;
                height: 140px;
            }
            .container {
                padding: 15px;
            }
        }
        .chart-canvas {
            width: 200px;
            height: 150px;
            max-width: 100%;
        }
        .chart-canvas-small {
            width: 250px;
            height: 180px;
            max-width: 100%;
        }
        .summary-stats {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .summary-stats h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .summary-item {
            background-color: white;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #ddd;
        }
        .summary-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
        }
        .summary-label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .interpretation {
            background-color: #e8f5e8;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .interpretation h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        .navigation {
            text-align: center;
            margin: 30px 0;
        }
        .nav-button {
            display: inline-block;
            padding: 12px 24px;
            margin: 0 10px;
            background-color: #f39c12;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background-color 0.3s;
        }
        .nav-button:hover {
            background-color: #d68910;
        }
        .distribution-info {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
        }
        .distribution-info strong {
            color: #495057;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š æè¿°æ€§çµ±è¨ˆå ±å‘Š</h1>
        
        <div class="navigation">
            <a href="multipleRegressionReport.html" class="nav-button">å¤šå…ƒå›æ­¸åˆ†æ</a>
            <a href="correlation_analysis_report.html" class="nav-button">ç›¸é—œä¿‚æ•¸åˆ†æ</a>
            <a href="graph.html" class="nav-button">å›åˆ°ä¸»é é¢</a>
        </div>

        <div class="summary-stats">
            <h3>ğŸ“ˆ è³‡æ–™é›†æ¦‚è¦½</h3>
            <div id="dataset-summary">
                <!-- è³‡æ–™é›†æ¦‚è¦½å°‡åœ¨é€™è£¡å‹•æ…‹è¼‰å…¥ -->
            </div>
        </div>

        <div id="descriptive-stats">
            <!-- æè¿°æ€§çµ±è¨ˆçµæœå°‡åœ¨é€™è£¡å‹•æ…‹è¼‰å…¥ -->
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <h3>è®Šæ•¸åˆ†ä½ˆæ¯”è¼ƒ</h3>
                <canvas id="distributionChart" class="chart-canvas-small"></canvas>
            </div>

            <div class="chart-container">
                <h3>å¹³å‡å€¼æ¯”è¼ƒ</h3>
                <canvas id="boxplotChart" class="chart-canvas-small"></canvas>
            </div>

            <div class="chart-container">
                <h3>è®Šç•°ä¿‚æ•¸æ¯”è¼ƒ</h3>
                <canvas id="variabilityChart" class="chart-canvas-small"></canvas>
            </div>
        </div>
    </div>

    <script>
        let statisticsData = null;

        // è¼‰å…¥æè¿°æ€§çµ±è¨ˆè³‡æ–™
        async function loadStatisticsData() {
            try {
                const response = await fetch('grade_correlation_results.json');
                statisticsData = await response.json();
                displayDescriptiveStats();
                createCharts();
            } catch (error) {
                console.error('è¼‰å…¥è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                document.getElementById('descriptive-stats').innerHTML = 
                    '<p style="color: red; text-align: center;">è¼‰å…¥è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹æª¢æŸ¥è³‡æ–™æª”æ¡ˆæ˜¯å¦å­˜åœ¨ã€‚</p>';
            }
        }

        // é¡¯ç¤ºæè¿°æ€§çµ±è¨ˆçµæœ
        function displayDescriptiveStats() {
            if (!statisticsData || !statisticsData.descriptive_statistics) return;

            // é¡¯ç¤ºè³‡æ–™é›†æ¦‚è¦½
            displayDatasetSummary();

            const container = document.getElementById('descriptive-stats');
            let html = '<h2>ğŸ“Š å„è®Šæ•¸æè¿°æ€§çµ±è¨ˆ</h2>';
            html += '<div class="stats-grid">';

            Object.entries(statisticsData.descriptive_statistics).forEach(([variable, stats]) => {
                // è¨ˆç®—é¡å¤–çš„çµ±è¨ˆé‡
                const range = stats.max - stats.min;
                const iqr = stats['75%'] - stats['25%'];
                const cv = (stats.std / stats.mean) * 100; // è®Šç•°ä¿‚æ•¸

                html += `
                    <div class="variable-card">
                        <h3>ğŸ“‹ ${variable}</h3>
                        <table class="stats-table">
                            <tr><th>çµ±è¨ˆé‡</th><th>æ•¸å€¼</th></tr>
                            <tr><td>æ¨£æœ¬æ•¸</td><td>${stats.count}</td></tr>
                            <tr><td>å¹³å‡æ•¸</td><td>${stats.mean.toFixed(4)}</td></tr>
                            <tr><td>æ¨™æº–å·®</td><td>${stats.std.toFixed(4)}</td></tr>
                            <tr><td>æœ€å°å€¼</td><td>${stats.min.toFixed(4)}</td></tr>
                            <tr><td>ç¬¬ä¸€å››åˆ†ä½æ•¸ (Q1)</td><td>${stats['25%'].toFixed(4)}</td></tr>
                            <tr><td>ä¸­ä½æ•¸ (Q2)</td><td>${stats['50%'].toFixed(4)}</td></tr>
                            <tr><td>ç¬¬ä¸‰å››åˆ†ä½æ•¸ (Q3)</td><td>${stats['75%'].toFixed(4)}</td></tr>
                            <tr><td>æœ€å¤§å€¼</td><td>${stats.max.toFixed(4)}</td></tr>
                            <tr><td>å…¨è·</td><td>${range.toFixed(4)}</td></tr>
                            <tr><td>å››åˆ†ä½è· (IQR)</td><td>${iqr.toFixed(4)}</td></tr>
                            <tr><td>è®Šç•°ä¿‚æ•¸ (%)</td><td>${cv.toFixed(2)}%</td></tr>
                        </table>
                        
                        <div class="distribution-info">
                            <strong>åˆ†ä½ˆç‰¹å¾µï¼š</strong><br>
                            ${getDistributionDescription(stats, cv)}
                        </div>
                    </div>`;
            });

            html += '</div>';

            // æ·»åŠ çµ±è¨ˆè§£é‡‹
            html += `
                <div class="interpretation">
                    <h4>çµ±è¨ˆé‡èªªæ˜</h4>
                    <ul>
                        <li><strong>å¹³å‡æ•¸ï¼š</strong> æ‰€æœ‰æ•¸å€¼çš„ç®—è¡“å¹³å‡ï¼Œåæ˜ ä¸­å¿ƒè¶¨å‹¢</li>
                        <li><strong>æ¨™æº–å·®ï¼š</strong> è¡¡é‡æ•¸æ“šåˆ†æ•£ç¨‹åº¦ï¼Œæ•¸å€¼è¶Šå¤§è¡¨ç¤ºè®Šç•°è¶Šå¤§</li>
                        <li><strong>å››åˆ†ä½æ•¸ï¼š</strong> å°‡æ•¸æ“šåˆ†ç‚ºå››ç­‰ä»½çš„æ•¸å€¼ï¼Œç”¨æ–¼äº†è§£æ•¸æ“šåˆ†ä½ˆ</li>
                        <li><strong>å››åˆ†ä½è· (IQR)ï¼š</strong> Q3 - Q1ï¼Œè¡¡é‡ä¸­é–“50%æ•¸æ“šçš„åˆ†æ•£ç¨‹åº¦</li>
                        <li><strong>è®Šç•°ä¿‚æ•¸ï¼š</strong> æ¨™æº–å·®ç›¸å°æ–¼å¹³å‡æ•¸çš„æ¯”ä¾‹ï¼Œç”¨æ–¼æ¯”è¼ƒä¸åŒè®Šæ•¸çš„è®Šç•°ç¨‹åº¦</li>
                        <li><strong>å…¨è·ï¼š</strong> æœ€å¤§å€¼èˆ‡æœ€å°å€¼çš„å·®è·ï¼Œåæ˜ æ•¸æ“šçš„æ•´é«”åˆ†ä½ˆç¯„åœ</li>
                    </ul>
                </div>`;

            container.innerHTML = html;
        }

        // é¡¯ç¤ºè³‡æ–™é›†æ¦‚è¦½
        function displayDatasetSummary() {
            if (!statisticsData || !statisticsData.descriptive_statistics) return;

            const variables = Object.keys(statisticsData.descriptive_statistics);
            const totalObservations = Object.values(statisticsData.descriptive_statistics)[0].count;
            
            // è¨ˆç®—å„è®Šæ•¸çš„å¹³å‡è®Šç•°ä¿‚æ•¸
            const avgCV = Object.values(statisticsData.descriptive_statistics)
                .map(stats => (stats.std / stats.mean) * 100)
                .reduce((sum, cv) => sum + cv, 0) / variables.length;

            const container = document.getElementById('dataset-summary');
            container.innerHTML = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-value">${variables.length}</div>
                        <div class="summary-label">åˆ†æè®Šæ•¸æ•¸é‡</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value">${totalObservations}</div>
                        <div class="summary-label">è§€æ¸¬å€¼æ•¸é‡</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value">${avgCV.toFixed(2)}%</div>
                        <div class="summary-label">å¹³å‡è®Šç•°ä¿‚æ•¸</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value">${getMostVariable()}</div>
                        <div class="summary-label">è®Šç•°æœ€å¤§çš„è®Šæ•¸</div>
                    </div>
                </div>`;
        }

        // å–å¾—è®Šç•°æœ€å¤§çš„è®Šæ•¸
        function getMostVariable() {
            if (!statisticsData || !statisticsData.descriptive_statistics) return 'N/A';

            let maxCV = 0;
            let mostVariableVar = '';

            Object.entries(statisticsData.descriptive_statistics).forEach(([variable, stats]) => {
                const cv = (stats.std / stats.mean) * 100;
                if (cv > maxCV) {
                    maxCV = cv;
                    mostVariableVar = variable;
                }
            });

            return mostVariableVar;
        }

        // æ ¹æ“šçµ±è¨ˆé‡æè¿°åˆ†ä½ˆç‰¹å¾µ
        function getDistributionDescription(stats, cv) {
            let description = [];

            // è®Šç•°ç¨‹åº¦
            if (cv < 15) {
                description.push('è®Šç•°ç¨‹åº¦ä½');
            } else if (cv < 30) {
                description.push('è®Šç•°ç¨‹åº¦ä¸­ç­‰');
            } else {
                description.push('è®Šç•°ç¨‹åº¦é«˜');
            }

            // åæ…‹åˆ¤æ–· (ç°¡åŒ–ç‰ˆ)
            const mean = stats.mean;
            const median = stats['50%'];
            if (Math.abs(mean - median) / stats.std < 0.5) {
                description.push('è¿‘ä¼¼å°ç¨±åˆ†ä½ˆ');
            } else if (mean > median) {
                description.push('å³ååˆ†ä½ˆ');
            } else {
                description.push('å·¦ååˆ†ä½ˆ');
            }

            // ç•°å¸¸å€¼åˆ¤æ–·
            const iqr = stats['75%'] - stats['25%'];
            const lowerBound = stats['25%'] - 1.5 * iqr;
            const upperBound = stats['75%'] + 1.5 * iqr;
            if (stats.min < lowerBound || stats.max > upperBound) {
                description.push('å¯èƒ½å­˜åœ¨ç•°å¸¸å€¼');
            }

            return description.join('ï¼Œ');
        }

        // å‰µå»ºåœ–è¡¨
        function createCharts() {
            if (!statisticsData) return;

            createDistributionChart();
            createBoxplotChart();
            createVariabilityChart();
        }

        // å‰µå»ºåˆ†ä½ˆæ¯”è¼ƒåœ–
        function createDistributionChart() {
            const ctx = document.getElementById('distributionChart').getContext('2d');
            
            const variables = Object.keys(statisticsData.descriptive_statistics);
            const colors = ['#3498db', '#e74c3c', '#2ecc71', '#f39c12', '#9b59b6'];

            const datasets = variables.map((variable, index) => {
                const stats = statisticsData.descriptive_statistics[variable];
                return {
                    label: variable,
                    data: [
                        { x: 'æœ€å°å€¼', y: stats.min },
                        { x: 'Q1', y: stats['25%'] },
                        { x: 'ä¸­ä½æ•¸', y: stats['50%'] },
                        { x: 'Q3', y: stats['75%'] },
                        { x: 'æœ€å¤§å€¼', y: stats.max }
                    ],
                    borderColor: colors[index % colors.length],
                    backgroundColor: colors[index % colors.length] + '20',
                    fill: false,
                    tension: 0.4
                };
            });

            new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: datasets
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: true,
                    aspectRatio: 5/12,
                    scales: {
                        x: {
                            type: 'category',
                            labels: ['æœ€å°å€¼', 'Q1', 'ä¸­ä½æ•¸', 'Q3', 'æœ€å¤§å€¼'],
                            title: {
                                display: true,
                                text: 'çµ±è¨ˆé‡'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'æ•¸å€¼'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'å„è®Šæ•¸äº”æ•¸æ¦‚æ‹¬æ¯”è¼ƒ',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
        }

        // å‰µå»ºç®±å‹åœ–ï¼ˆç°¡åŒ–ç‰ˆï¼‰
        function createBoxplotChart() {
            const ctx = document.getElementById('boxplotChart').getContext('2d');
            
            // å¼·åˆ¶è¨­å®š canvas å°ºå¯¸
            const canvas = ctx.canvas;
            canvas.width = 250;
            canvas.height = 180;
            
            const variables = Object.keys(statisticsData.descriptive_statistics);
            const colors = ['#3498db', '#e74c3c', '#2ecc71', '#f39c12', '#9b59b6'];

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: variables,
                    datasets: [{
                        label: 'å¹³å‡å€¼',
                        data: variables.map(variable => 
                            statisticsData.descriptive_statistics[variable].mean
                        ),
                        backgroundColor: variables.map((_, index) => 
                            colors[index % colors.length] + '80'
                        ),
                        borderColor: variables.map((_, index) => 
                            colors[index % colors.length]
                        ),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'æ•¸å€¼',
                                font: { size: 10 }
                            },
                            ticks: { font: { size: 9 } }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'è®Šæ•¸',
                                font: { size: 10 }
                            },
                            ticks: { font: { size: 9 } }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'å„è®Šæ•¸å¹³å‡å€¼æ¯”è¼ƒ',
                            font: { size: 12 }
                        },
                        legend: { display: false }
                    }
                }
            });
        }

        // å‰µå»ºè®Šç•°æ€§æ¯”è¼ƒåœ–
        function createVariabilityChart() {
            const ctx = document.getElementById('variabilityChart').getContext('2d');
            
            // å¼·åˆ¶è¨­å®š canvas å°ºå¯¸
            const canvas = ctx.canvas;
            canvas.width = 250;
            canvas.height = 180;
            
            const variables = Object.keys(statisticsData.descriptive_statistics);
            const cvValues = variables.map(variable => {
                const stats = statisticsData.descriptive_statistics[variable];
                return (stats.std / stats.mean) * 100;
            });

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: variables,
                    datasets: [{
                        label: 'è®Šç•°ä¿‚æ•¸ (%)',
                        data: cvValues,
                        backgroundColor: cvValues.map(cv => {
                            if (cv < 15) return '#2ecc71';
                            if (cv < 30) return '#f39c12';
                            return '#e74c3c';
                        }),
                        borderColor: cvValues.map(cv => {
                            if (cv < 15) return '#27ae60';
                            if (cv < 30) return '#d68910';
                            return '#c0392b';
                        }),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'è®Šç•°ä¿‚æ•¸ (%)',
                                font: { size: 10 }
                            },
                            ticks: { font: { size: 9 } }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'è®Šæ•¸',
                                font: { size: 10 }
                            },
                            ticks: { font: { size: 9 } }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'å„è®Šæ•¸è®Šç•°ä¿‚æ•¸æ¯”è¼ƒ',
                            font: { size: 12 }
                        },
                        legend: { display: false }
                    }
                }
            });
        }

        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', loadStatisticsData);
    </script>
</body>
</html>
